<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Engraving Preview â€” LPWW</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Fonts */
    @font-face { font-family: "PreviewFont1"; src: url("longtail.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont2"; src: url("brittany-signature-script.regular.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont3"; src: url("kugile.regular.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont4"; src: url("mochademo.mocha-demo.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont5"; src: url("Berista.ttf") format("truetype"); }
    @font-face { font-family: "MainFont"; src: url("BebasNeue-Regular.ttf") format("truetype"); }

    body {
      font-family: "MainFont", system-ui, sans-serif;
      margin: 18px;
      display: flex;
      justify-content: center;
    }

    .container { width: 100%; max-width: 900px; }
    h1 { font-size: 20px; margin: 6px 0 18px 0; }
    label { display:block; margin-bottom:6px; font-weight:600; }
    .row { display:flex; gap:12px; align-items:center; margin-bottom:12px; flex-wrap:wrap; }
    .col { flex: 1 1 220px; min-width: 220px; }
    input[type="text"], select, textarea { width:100%; padding:10px; font-size:16px; border:1px solid #ddd; border-radius:6px; font-family: inherit; box-sizing:border-box; }
    .preview-area { position: relative; background: #fafafa; border:1px solid #e5e5e5; border-radius:10px; overflow:hidden; max-width:100%; }
    .image-wrapper { width:100%; position: relative; }
    .image-wrapper img { display:block; width:100%; height:auto; user-select:none; -webkit-user-drag:none; }
    .overlay { position: absolute; white-space: pre-wrap; word-break: break-word; color: #000; transform: translate(-50%, -50%); pointer-events: none; text-align:center; }
    .btn { display:inline-block; padding:10px 14px; background:#0b76ef; color:#fff; border-radius:6px; text-decoration:none; cursor:pointer; border:none; }
    .btn.secondary { background:#666; }
    .small { padding:6px 8px; font-size:14px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Engraving Preview</h1>

    <div class="controls">
      <div class="row">
        <div class="col">
          <label for="textInput">Text to engrave</label>
          <input id="textInput" type="text" placeholder="Type the text exactly as you want it" oninput="updatePreview()" />
        </div>
        <div style="width:160px;">
          <label for="fontSelect">Choose font</label>
          <select id="fontSelect" onchange="updatePreview()">
            <option value="PreviewFont1">PreviewFont1</option>
            <option value="PreviewFont2">PreviewFont2</option>
            <option value="PreviewFont3">PreviewFont3</option>
            <option value="PreviewFont4">PreviewFont4</option>
            <option value="PreviewFont5">PreviewFont5</option>
          </select>
        </div>
        <div style="width:160px;">
          <label for="sizeRange">Font size</label>
          <input id="sizeRange" type="range" min="18" max="120" value="48" oninput="updatePreview()" />
        </div>
        <div style="width:140px;">
          <label for="colorInput">Color</label>
          <input id="colorInput" type="color" value="#000000" onchange="updatePreview()" />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label for="placementSelect">Placement (snap positions)</label>
          <select id="placementSelect" onchange="applyPlacement()">
            <option value="top-left">Top Left</option>
            <option value="top-center">Top Center</option>
            <option value="top-right">Top Right</option>
            <option value="center-left">Center Left</option>
            <option value="center">Center</option>
            <option value="center-right">Center Right</option>
            <option value="bottom-left">Bottom Left</option>
            <option value="bottom-center">Bottom Center</option>
            <option value="bottom-right">Bottom Right</option>
          </select>
        </div>
      </div>
    </div>

    <div class="preview-area" style="margin-top:18px;">
      <div class="image-wrapper">
        <img id="productImage" src="" alt="Board preview" />
        <div id="overlayText" class="overlay">Your text</div>
      </div>
    </div>
  </div>

  <script>
    const productImage = document.getElementById('productImage');
    const overlayText = document.getElementById('overlayText');
    const txtInput = document.getElementById('textInput');
    const fontSelect = document.getElementById('fontSelect');
    const sizeRange = document.getElementById('sizeRange');
    const colorInput = document.getElementById('colorInput');
    const placementSelect = document.getElementById('placementSelect');

    // Map IDs to image URLs (update this as you upload new images)
    const images = {
      "0001": "final inventory-123.jpg",
      "0002": "final inventory-125.jpg",
      "0003": "final inventory-127.jpg",
      "0004": "final inventory-129.jpg",
    };

    function getQueryParam(name) {
      return new URLSearchParams(window.location.search).get(name);
    }

    function updatePreview(){
      const t = txtInput.value || ' ';
      overlayText.textContent = t;
      overlayText.style.fontFamily = fontSelect.value;
      overlayText.style.fontSize = sizeRange.value + 'px';
      overlayText.style.color = colorInput.value;
      applyPlacement();
    }

    function applyPlacement(){
      const pos = placementSelect.value;
      let top = '50%', left='50%', translateX='-50%', translateY='-50%', textAlign='center';
      switch(pos){
        case 'top-left': top='7%'; left='7%'; translateX='0%'; translateY='0%'; textAlign='left'; break;
        case 'top-center': top='7%'; left='50%'; translateX='-50%'; translateY='0%'; break;
        case 'top-right': top='7%'; left='93%'; translateX='-100%'; translateY='0%'; textAlign='right'; break;
        case 'center-left': top='50%'; left='7%'; translateX='0%'; translateY='-50%'; textAlign='left'; break;
        case 'center': break;
        case 'center-right': top='50%'; left='93%'; translateX='-100%'; translateY='-50%'; textAlign='right'; break;
        case 'bottom-left': top='93%'; left='7%'; translateX='0%'; translateY='-100%'; textAlign='left'; break;
        case 'bottom-center': top='93%'; left='50%'; translateX='-50%'; translateY='-100%'; break;
        case 'bottom-right': top='93%'; left='93%'; translateX='-100%'; translateY='-100%'; textAlign='right'; break;
      }
      overlayText.style.top = top;
      overlayText.style.left = left;
      overlayText.style.transform = `translate(${translateX}, ${translateY})`;
      overlayText.style.textAlign = textAlign;
    }

    // On load, pick the image by ID
    window.addEventListener('load', () => {
      const id = getQueryParam('id');
      if(id && images[id]){
        productImage.src = images[id];
      } else {
        productImage.src = 'https://via.placeholder.com/600x400?text=Board+Preview';
      }
      updatePreview();
    });
  </script>
</body>
</html>
