<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Engraving Preview — LPWW</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Fonts */
    @font-face { font-family: "PreviewFont1"; src: url("longtail.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont2"; src: url("brittany-signature-script.regular.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont3"; src: url("kugile.regular.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont4"; src: url("mochademo.mocha-demo.ttf") format("truetype"); }
    @font-face { font-family: "PreviewFont5"; src: url("Berista.ttf") format("truetype"); }
    @font-face { font-family: "MainFont"; src: url("BebasNeue-Regular.ttf") format("truetype"); }

    body {
      font-family: "MainFont", system-ui, sans-serif;
      margin: 1px;
      display: flex;
      justify-content: center;
      background: #222222;
    }

    .container { width: 100%; max-width: 900px; }

    h1 {
      font-size: 50px;
      margin-bottom: 20px;
      color: #da9a00;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
      font-size: 18pt;
      color: #da9a00;
    }

    input[type="text"], select {
      width: 100%;
      padding: 12px;
      font-size: 18px;
      border: 0px solid #da9a00;
      border-radius: 6px;
      box-sizing: border-box;
      margin-bottom: 20px;
      font-family: inherit;
    }

    /******** SLIDER CUSTOM ********/
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      margin-bottom: 20px;
      height: 8px;
      background: #da9a00;
      border-radius: 5px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid #da9a00;
    }

    input[type="range"]::-moz-range-thumb {
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid #da9a00;
    }

    /* Preview */
    .preview-area {
      margin-top: 25px;
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      background: #222222;
    }

    .image-wrapper img {
      width: 100%;
      display: block;
    }

    .overlay {
      position: absolute;
      color: black;
      white-space: pre-wrap;
      word-break: break-word;
      transform: translate(-50%, -50%);
      pointer-events: none;
      font-size: 40px;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Engraving Preview Form</h1>

    <!-- TEXT INPUT -->
    <label for="textInput">1. Enter the text you want engraved</label>
    <input id="textInput" type="text" placeholder="Type engraving text here…" oninput="updatePreview()" />

    <!-- FONT SELECT -->
    <label for="fontSelect">2. Choose a font</label>
    <select id="fontSelect" onchange="updatePreview()">
      <option value="PreviewFont1">PreviewFont1</option>
      <option value="PreviewFont2">PreviewFont2</option>
      <option value="PreviewFont3">PreviewFont3</option>
      <option value="PreviewFont4">PreviewFont4</option>
      <option value="PreviewFont5">PreviewFont5</option>
    </select>

    <!-- SIZE SLIDER -->
    <label for="sizeRange">3. Select font size</label>
    <input id="sizeRange" type="range" min="20" max="120" step="10" value="50" oninput="updatePreview()" />

    <!-- PLACEMENT -->
    <label for="placementSelect">4. Choose text placement</label>
    <select id="placementSelect" onchange="applyPlacement()">
      <option value="top-left">Top Left</option>
      <option value="top-right">Top Right</option>
      <option value="bottom-left">Bottom Left</option>
      <option value="bottom-right">Bottom Right</option>
    </select>

    <!-- PREVIEW -->
    <div class="preview-area">
      <div class="image-wrapper">
        <img id="productImage" src="" alt="Board preview">
        <div id="overlayText" class="overlay">Your text</div>
      </div>
    </div>
  </div>

  <script>
    const productImage = document.getElementById("productImage");
    const overlayText = document.getElementById("overlayText");
    const txtInput = document.getElementById("textInput");
    const fontSelect = document.getElementById("fontSelect");
    const sizeRange = document.getElementById("sizeRange");
    const placementSelect = document.getElementById("placementSelect");

    // IMAGE MAP
    const images = {
      "0001": "Engaving crop test 1.png",
      "0002": "Engaving crop test 2.png",
      "0003": "Engaving crop test 3.png",
      "0004": "Engaving crop test 4.png"
    };

    function getQueryParam(name) {
      return new URLSearchParams(window.location.search).get(name);
    }

    function updatePreview() {
      overlayText.textContent = txtInput.value || " ";
      overlayText.style.fontFamily = fontSelect.value;
      overlayText.style.fontSize = sizeRange.value + "px";
      overlayText.style.color = "black";  
      applyPlacement();
    }

    function applyPlacement() {
      const pos = placementSelect.value;

      let top = "50%", left = "50%", tx = "-50%", ty = "-50%", align = "center";

      switch (pos) {
        case "top-left": top="7%"; left="7%"; tx="0"; ty="0"; align="left"; break;
        case "top-right": top="7%"; left="93%"; tx="-100%"; ty="0"; align="right"; break;
        case "bottom-left": top="93%"; left="7%"; tx="0"; ty="-100%"; align="left"; break;
        case "bottom-right": top="93%"; left="93%"; tx="-100%"; ty="-100%"; align="right"; break;
      }

      overlayText.style.top = top;
      overlayText.style.left = left;
      overlayText.style.transform = `translate(${tx}, ${ty})`;
      overlayText.style.textAlign = align;
    }

    window.addEventListener("load", () => {
      const id = getQueryParam("id");
      productImage.src = (id && images[id]) ? images[id] : "https://via.placeholder.com/600x400?text=Board+Preview";
      updatePreview();
    });
  </script>
</body>
</html>
